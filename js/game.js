/***********************************************************************************
 * 
 * 									   提示
 * 					游戏相关配置可根据需求和图片大小对数据进行修改
 * 							非专业人员不得修改变量名称
 * 
 * 
 **********************************************************************************/

//*****************************模式一游戏基本参数配置*********************************
	
	//玩家生命值	
	var m1_player_blood = 5; 
	
	//玩家移动速度
	var m1_player_speed = 12;
	
	//玩家炮弹速度
	var m1_bullet_speed = 14;
	
	//敌人1移动速度
	var m1_enemy1_speed = 8;
	
	//敌人2移动速度
	var m1_enemy2_speed = 12;
	
	//敌人3移动速度
	var m1_enemy3_speed = 14;
	
	//敌人1出现间隔时间（毫秒）
	var m1_enemy1_push_time = 2000;   
	
	//敌人2出现间隔时间（毫秒）
	var m1_enemy2_push_time = 1450;
	
	//敌人3出现间隔时间（毫秒）
	var m1_enemy3_push_time = 1250;
	
	//一级升二级所需要的分数
	var m1_promote_lv1_lv2 = 3;
	
	//二级升三级所需要的分数
	var m1_promote_lv2_lv3 = 8;
	
//*****************************模式一宽高常量设置******************************
	
	//玩家图片宽
	var m1_player_pic_width = 80;
	
	//玩家图片高
	var m1_player_pic_height = 115;
	
	//敌人1图片宽
	var m1_enemy1_pic_width = 111;
	
	//敌人1图片高
	var m1_enemy1_pic_height = 90;
	
	//敌人2图片宽
	var m1_enemy2_pic_width = 118;

	//敌人2图片高
	var m1_enemy2_pic_height = 99;
	
	//敌人3图片宽
	var m1_enemy3_pic_width = 100;

	//敌人3图片高
	var m1_enemy3_pic_height = 105;
	
	//炮弹宽
	var m1_bullet_pic_width = 43;
	
	//炮弹高
	var m1_bullet_pic_height = 40;
	
	//炮弹相对玩家的x位置
	var m1_bullet_pic_x = 30;
	
	//炮弹相对玩家的y位置
	var m1_bullet_pic_y = 50;
	
	//玩家初始x位置
	var m1_player_init_x = 850;
	
	//玩家初始y位置
	var m1_player_init_y = 300;
	
	//玩家可移动范围x坐标1
	var m1_player_move_scope_x1 = 10;
	
	//玩家可移动范围x坐标2
	var m1_player_move_scope_x2 = 950;
	
	//玩家可移动范围y坐标1
	var m1_player_move_scope_y1 = 10;
	
	//玩家可移动范围y坐标2
	var m1_player_move_scope_y2 = 650;
		
//*****************************模式二游戏基本参数配置*********************************
	
	//玩家生命值	
	var m2_player_blood = 4; 
	
	//玩家移动速度
	var m2_player_speed = 12;
	
	//玩家炮弹速度
	var m2_bullet_speed = 14;
	
	//敌人1移动速度
	var m2_enemy1_speed = 10;
	
	//敌人2移动速度
	var m2_enemy2_speed = 14;
	
	//敌人3移动速度
	var m2_enemy3_speed = 16;
	
	//敌人1出现间隔时间（毫秒）
	var m2_enemy1_push_time = 2000;   
	
	//敌人2出现间隔时间（毫秒）
	var m2_enemy2_push_time = 1450;
	
	//敌人3出现间隔时间（毫秒）
	var m2_enemy3_push_time = 1250;
	
	//一级升二级所需要的分数
	var m2_promote_lv1_lv2 = 3;
	
	//二级升三级所需要的分数
	var m2_promote_lv2_lv3 = 8;
	
//*****************************模式二宽高常量设置******************************
	
	//玩家图片宽
	var m2_player_pic_width = 100;
	
	//玩家图片高
	var m2_player_pic_height = 130;
	
	//敌人1图片宽
	var m2_enemy1_pic_width = 177;
	
	//敌人1图片高
	var m2_enemy1_pic_height = 100;
	
	//敌人2图片宽
	var m2_enemy2_pic_width = 113;

	//敌人2图片高
	var m2_enemy2_pic_height = 124;
	
	//敌人3图片宽
	var m2_enemy3_pic_width = 98;

	//敌人3图片高
	var m2_enemy3_pic_height = 130;
	
	//炮弹宽
	var m2_bullet_pic_width = 64;
	
	//炮弹高
	var m2_bullet_pic_height = 63;
	
	//炮弹相对玩家的x位置
	var m2_bullet_pic_x = 30;
	
	//炮弹相对玩家的y位置
	var m2_bullet_pic_y = 60;
	
	//玩家初始x位置
	var m2_player_init_x = 850;
	
	//玩家初始y位置
	var m2_player_init_y = 300;
	
	//玩家可移动范围x坐标1
	var m2_player_move_scope_x1 = 10;
	
	//玩家可移动范围x坐标2
	var m2_player_move_scope_x2 = 950;
	
	//玩家可移动范围y坐标1
	var m2_player_move_scope_y1 = 10;
	
	//玩家可移动范围y坐标2
	var m2_player_move_scope_y2 = 650;
	
//*****************************模式三游戏基本参数配置*********************************
	
	//玩家生命值	
	var m3_player_blood = 4; 
	
	//玩家移动速度
	var m3_player_speed = 12;
	
	//玩家炮弹速度
	var m3_bullet_speed = 14;
	
	//敌人1移动速度
	var m3_enemy1_speed = 12;
	
	//敌人2移动速度
	var m3_enemy2_speed = 15;
	
	//敌人3移动速度
	var m3_enemy3_speed = 18;
	
	//敌人1出现间隔时间（毫秒）
	var m3_enemy1_push_time = 2000;   
	
	//敌人2出现间隔时间（毫秒）
	var m3_enemy2_push_time = 1450;
	
	//敌人3出现间隔时间（毫秒）
	var m3_enemy3_push_time = 1250;
	
	//一级升二级所需要的分数
	var m3_promote_lv1_lv2 = 3;
	
	//二级升三级所需要的分数
	var m3_promote_lv2_lv3 = 8;
	
//*****************************模式三图片宽高常量设置******************************
	
	//玩家图片宽
	var m3_player_pic_width = 150;
	
	//玩家图片高
	var m3_player_pic_height = 158;
	
	//敌人1图片宽
	var m3_enemy1_pic_width = 100;
	
	//敌人1图片高
	var m3_enemy1_pic_height = 105;
	
	//敌人2图片宽
	var m3_enemy2_pic_width = 177;

	//敌人2图片高
	var m3_enemy2_pic_height = 100;
	
	//敌人3图片宽
	var m3_enemy3_pic_width = 148;

	//敌人3图片高
	var m3_enemy3_pic_height = 150;
	
	//炮弹宽
	var m3_bullet_pic_width = 30;
	
	//炮弹高
	var m3_bullet_pic_height = 58;
	
	//炮弹相对玩家的x位置
	var m3_bullet_pic_x = 0;
	
	//炮弹相对玩家的y位置
	var m3_bullet_pic_y = 50;
	
	//玩家初始x位置
	var m3_player_init_x = 850;
	
	//玩家初始u位置
	var m3_player_init_y = 300;
	
	//玩家可移动范围x坐标1
	var m3_player_move_scope_x1 = 10;
	
	//玩家可移动范围x坐标2
	var m3_player_move_scope_x2 = 950;
	
	//玩家可移动范围y坐标1
	var m3_player_move_scope_y1 = 10;
	
	//玩家可移动范围y坐标2
	var m3_player_move_scope_y2 = 650;

/*******************************************************************************
 * 
 * 
 * 
 *					警告：以下代码为本游戏的核心业务逻辑代码
 * 							非专业人员请勿修改！！！
 * 
 * 
 * 
 *******************************************************************************/

//****************************全局变量的声明*************************************
	var player_blood; 
	var player_speed;
	var bullet_speed;
	var enemy1_speed;
	var enemy2_speed;
	var enemy3_speed;
	var enemy1_push_time;
	var enemy2_push_time;
	var enemy3_push_time;
	var promote_lv1_lv2;
	var promote_lv2_lv3;
	var player_pic_width;
	var player_pic_height;
	var enemy1_pic_width;
	var enemy1_pic_height;
	var enemy2_pic_width;
	var enemy2_pic_height;
	var enemy3_pic_width;
	var enemy3_pic_height;
	var bullet_pic_width;
	var bullet_pic_height;
	var bullet_pic_x;
	var bullet_pic_y;
	var player_init_x;
	var player_init_y;
	var player_move_scope_x1;
	var player_move_scope_x2;
	var player_move_scope_y1;
	var player_move_scope_y2;
	
	var arr; //图片路径存放的数组
	
	 function gstart(){
        
        var start = document.getElementById("start");

        if($("#start")){  
            $("#start").hide();  
        }
        
        if(event.target.id == "start_btn1"){
        	document.getElementById("can").style.backgroundImage = "url('img/m1/bg.jpg')";
			arr = ["img/m1/enemy1.png","img/m1/enemy2.png","img/m1/enemy3.png","img/m1/player.png", "img/m1/bullet.png"]; //定义图片的路径
			player_blood = m1_player_blood; 
			player_speed = m1_player_speed;
			bullet_speed = m1_bullet_speed;
			enemy1_speed = m1_enemy1_speed;
			enemy2_speed = m1_enemy2_speed;
			enemy3_speed = m1_enemy3_speed;
			enemy1_push_time = m1_enemy1_push_time;   
			enemy2_push_time = m1_enemy2_push_time;
			enemy3_push_time = m1_enemy3_push_time;
			promote_lv1_lv2 = m1_promote_lv1_lv2;
			promote_lv2_lv3 = m1_promote_lv2_lv3;
			player_pic_width = m1_player_pic_width;
			player_pic_height = m1_player_pic_height;
			enemy1_pic_width = m1_enemy1_pic_width;
			enemy1_pic_height = m1_enemy1_pic_height;
			enemy2_pic_width = m1_enemy2_pic_width;
			enemy2_pic_height = m1_enemy2_pic_height;
			enemy3_pic_width = m1_enemy3_pic_width;
			enemy3_pic_height = m1_enemy3_pic_height;
			bullet_pic_width = m1_bullet_pic_width;
			bullet_pic_height = m1_bullet_pic_height;
			bullet_pic_x = m1_bullet_pic_x;
			bullet_pic_y = m1_bullet_pic_y;
			player_init_x = m1_player_init_x;
			player_init_y = m1_player_init_y;
			player_move_scope_x1 = m1_player_move_scope_x1;
			player_move_scope_x2 = m1_player_move_scope_x2;
			player_move_scope_y1 = m1_player_move_scope_y1;
			player_move_scope_y2 = m1_player_move_scope_y2;
			
        }
        
        if(event.target.id == "start_btn2"){
        	document.getElementById("can").style.backgroundImage = "url('img/m2/bg.jpg')";
			arr = ["img/m2/enemy1.png","img/m2/enemy2.png","img/m2/enemy3.png","img/m2/player.png", "img/m2/bullet.png"]; //定义图片的路径
			player_blood = m2_player_blood; 
			player_speed = m2_player_speed;
			bullet_speed = m2_bullet_speed;
			enemy1_speed = m2_enemy1_speed;
			enemy2_speed = m2_enemy2_speed;
			enemy3_speed = m2_enemy3_speed;
			enemy1_push_time = m2_enemy1_push_time;   
			enemy2_push_time = m2_enemy2_push_time;
			enemy3_push_time = m2_enemy3_push_time;
			promote_lv1_lv2 = m2_promote_lv1_lv2;
			promote_lv2_lv3 = m2_promote_lv2_lv3;
			player_pic_width = m2_player_pic_width;
			player_pic_height = m2_player_pic_height;
			enemy1_pic_width = m2_enemy1_pic_width;
			enemy1_pic_height = m2_enemy1_pic_height;
			enemy2_pic_width = m2_enemy2_pic_width;
			enemy2_pic_height = m2_enemy2_pic_height;
			enemy3_pic_width = m2_enemy3_pic_width;
			enemy3_pic_height = m2_enemy3_pic_height;
			bullet_pic_width = m2_bullet_pic_width;
			bullet_pic_height = m2_bullet_pic_height;
			bullet_pic_x = m2_bullet_pic_x;
			bullet_pic_y = m2_bullet_pic_y;
			player_init_x = m2_player_init_x;
			player_init_y = m2_player_init_y;
			player_move_scope_x1 = m2_player_move_scope_x1;
			player_move_scope_x2 = m2_player_move_scope_x2;
			player_move_scope_y1 = m2_player_move_scope_y1;
			player_move_scope_y2 = m2_player_move_scope_y2;
        }
        
        if(event.target.id == "start_btn3"){
        	document.getElementById("can").style.backgroundImage = "url('img/m3/bg.jpg')";
			arr = ["img/m3/enemy1.png","img/m3/enemy2.png","img/m3/enemy3.png","img/m3/player.png", "img/m3/bullet.png"]; //定义图片的路径
			player_blood = m3_player_blood; 
			player_speed = m3_player_speed;
			bullet_speed = m3_bullet_speed;
			enemy1_speed = m3_enemy1_speed;
			enemy2_speed = m3_enemy2_speed;
			enemy3_speed = m3_enemy3_speed;
			enemy1_push_time = m3_enemy1_push_time;   
			enemy2_push_time = m3_enemy2_push_time;
			enemy3_push_time = m3_enemy3_push_time;
			promote_lv1_lv2 = m3_promote_lv1_lv2;
			promote_lv2_lv3 = m3_promote_lv2_lv3;
			player_pic_width = m3_player_pic_width;
			player_pic_height = m3_player_pic_height;
			enemy1_pic_width = m3_enemy1_pic_width;
			enemy1_pic_height = m3_enemy1_pic_height;
			enemy2_pic_width = m3_enemy2_pic_width;
			enemy2_pic_height = m3_enemy2_pic_height;
			enemy3_pic_width = m3_enemy3_pic_width;
			enemy3_pic_height = m3_enemy3_pic_height;
			bullet_pic_width = m3_bullet_pic_width;
			bullet_pic_height = m3_bullet_pic_height;
			bullet_pic_x = m3_bullet_pic_x;
			bullet_pic_y = m3_bullet_pic_y;
			player_init_x = m3_player_init_x;
			player_init_y = m3_player_init_y;
			player_move_scope_x1 = m3_player_move_scope_x1;
			player_move_scope_x2 = m3_player_move_scope_x2;
			player_move_scope_y1 = m3_player_move_scope_y1;
			player_move_scope_y2 = m3_player_move_scope_y2;
			
        }
		

        gamefunction();
        
        
    }
	
	
function gamefunction(){
  	
    var can = document.getElementById("can"); //获取画布
    var pen = can.getContext("2d"); //获取画笔
    var enemy1 = []; 
    var enemy2 = [];
    var enemy3 = [];
    
    var txt1 = document.getElementById("txt1");
    var txt2 = document.getElementById("txt2");
    var txt3 = document.getElementById("txt3");

    txt1.value = player_blood;
    
    var num1=txt1.value;
    var num2=txt2.value;
    
    var player = {
        x_: player_init_x,
        y_: player_init_y,
        blood:player_blood,
    }; //初始化 
    var bullet = [];


	var pushEnemy1Int;
	var pushEnemy2Int;
	var pushEnemy3Int;
	var n=0;
	var m=0;

    function pushEnemy1(time_) {
    	
        pushEnemy1Int = setInterval(function () {
            var random_ = Math.ceil(Math.random() * 650);
            enemy1.push({
                x_: -100,
                y_: random_,
                pic: 0
            });
        }, time_)
    }
    
    function pushEnemy2(time_) {
        pushEnemy2Int = setInterval(function () {
            var random_ = Math.ceil(Math.random() * 650);
            enemy2.push({
                x_: -100,
                y_: random_,
                pic: 0
            });
        }, time_)
    }
    
    function pushEnemy3(time_) {
        pushEnemy3Int = setInterval(function () {
            var random_ = Math.ceil(Math.random() * 650);
            enemy3.push({
                x_: -100,
                y_: random_,
                pic: 0
            });
        }, time_)
    }
    
    
    //懒加载的方法
    function imgLoads(arr, callBack_) {
        var json = {}; //存储图片对象
        var len = arr.length;
        var load = 0;

        for (var i = 0; i < len; i++) {
            var img = new Image();
            img.onload = function () {
                load++;
                if (load == len) {
                    callBack_(json);
                }
            }
            img.src = arr[i];
            var key_ = arr[i].substring(arr[i].lastIndexOf("/")+1,arr[i].lastIndexOf("."));

            json[key_] = img;
        }
    }

    //碰撞检测 匹配
    function crash(x1, y1, w1, h1, x2, y2, w2, h2) {
        var l1 = x1;
        var r1 = x1 + w1;
        var t1 = y1;
        var b1 = y1 + h1;

        var l2 = x2;
        var r2 = x2 + w2;
        var t2 = y2;
        var b2 = y2 + h2;

        if (r1 < l2 || l1 > r2 || t1 > b2 || b1 < t2) {
            return false;
        } else {
            return true;
        }
    }
      
    //键盘事件
    window.onkeydown = function (e) {
        var key_ = e.keyCode;
        switch (key_) {
        case 37: //键盘上下左右 左方向键
            if (player.x_ > player_move_scope_x1)
                player.x_ -= player_speed;
            break;

        case 39: //键盘上下左右 右方向键
            if (player.x_ < player_move_scope_x2)
                player.x_ += player_speed;
            break;
                
        case 38: //键盘上下左右 左方向键
            if (player.y_ > player_move_scope_y1)
                player.y_ -= player_speed;
            break;

        case 40: //键盘上下左右 右方向键
            if (player.y_ < player_move_scope_y2)
                player.y_ += player_speed;
            break;

        case 32: //空格键 增加炮弹
            bullet.push({
                x_: player.x_ + bullet_pic_x,
                y_: player.y_ + bullet_pic_y
            });
            break;
        }

    }
    
    
    
    pushEnemy1(enemy1_push_time);
 

    //调用预加载的方法 将每张图片缓存到浏览器中
    imgLoads(arr, function (img) {

        var imgLoadsInt = setInterval(function () {

            pen.clearRect(0, 0, 1024, 768);
            
            for (var j = 0; j < enemy1.length; j++) {
                    enemy1[j].pic++;
                	if (enemy1[j].pic == 8) {
                    	enemy1[j].pic = 0;
                	}
                    if (enemy1.length > 0) {
                        if (enemy1[j].x_ > 900) {
                            enemy1.splice(j, 1);
                            }else{
                                pen.drawImage(img.enemy1, 0, enemy1[j].pic * enemy1_pic_height, enemy1_pic_width, enemy1_pic_height, enemy1[j].x_+=enemy1_speed, enemy1[j].y_, enemy1_pic_width, enemy1_pic_height);
                            }
                    }
         	}
        	
        	for (var j = 0; j < enemy2.length; j++) {
        			enemy2[j].pic++;
                	if (enemy2[j].pic == 8) {
                    	enemy2[j].pic = 0;
                	}
                    if (enemy2.length > 0) {
                        if (enemy2[j].x_ > 900) {
                            enemy2.splice(j, 1);
                            }else{
                                pen.drawImage(img.enemy2, 0, enemy2[j].pic * enemy2_pic_height, enemy2_pic_width, enemy2_pic_height, enemy2[j].x_+=enemy2_speed, enemy2[j].y_, enemy2_pic_width, enemy2_pic_height);
                            }
                    }
         	}
        	
        	for (var j = 0; j < enemy3.length; j++) {
        			enemy3[j].pic++;
                	if (enemy3[j].pic == 8) {
                    	enemy3[j].pic = 0;
                	}
                    if (enemy3.length > 0) {
                        if (enemy3[j].x_ > 900) {
                            enemy3.splice(j, 1);
                            }else{
                                pen.drawImage(img.enemy3, 0, enemy3[j].pic * enemy3_pic_height, enemy3_pic_width, enemy3_pic_height, enemy3[j].x_+=enemy3_speed, enemy3[j].y_, enemy3_pic_width, enemy3_pic_height);
                            }
                    }
         	}
        
                
            
            //======================================================================================
            //绘制炮弹  
            if (bullet.length > 0) {
                for (var i = 0; i < bullet.length; i++) {
                    bullet[i].x_ -= bullet_speed; 
                    if (bullet[i].x_ < 20) { //如果炮弹超出屏幕，则清除炮弹
                        bullet.splice(i, 1);
                    } else {
                        //绘制炮弹
                        pen.drawImage(img.bullet, 0, 0, bullet_pic_width, bullet_pic_height, bullet[i].x_, bullet[i].y_, bullet_pic_width, bullet_pic_height);
                        
                        
                        for (var k = 0; k < enemy1.length; k++) {
                            var status = crash(enemy1[k].x_, enemy1[k].y_, enemy1_pic_width, enemy1_pic_height, bullet[i].x_, bullet[i].y_, bullet_pic_width, bullet_pic_height);
                            if (status) {
                                //如果碰撞到则消失
                                bullet.splice(i, 1);
                                enemy1.splice(k, 1);
                                num2++;

                                txt2.value=num2;
                                
                                
                                if(num2>=promote_lv1_lv2 && num2<promote_lv2_lv3){
                                	
                                	if(n<1){
                                		pushEnemy2(enemy2_push_time);
                                		clearInterval(pushEnemy1Int);
                                		n++;
                                	}
                                	else
                                	{
                                		clearInterval(pushEnemy1Int);
                                		n++;
                                	}
                                	
                                	
                                	
                               }
                                
                                   
                            }
                        }
                        
                        
                        for (var k = 0; k < enemy2.length; k++) {
		                    var status = crash(enemy2[k].x_, enemy2[k].y_, enemy2_pic_width, enemy2_pic_height, bullet[i].x_, bullet[i].y_, bullet_pic_width, bullet_pic_height);
		                    if (status) {
		                        //如果碰撞到则消失
		                        bullet.splice(i, 1);
		                        enemy2.splice(k, 1);
		                        num2++;
	//                          alert(num);
		                        txt2.value=num2;
		                   
		                        if(num2>=promote_lv2_lv3){
		                        	
		                        	if(m<1){
		                        		pushEnemy3(enemy3_push_time);
                                		clearInterval(pushEnemy2Int);
                                		m++;
		                        	}
		                        	else
		                        	{
		                        	    clearInterval(pushEnemy2Int);
		                        	    m++;
		                        	}
		                        	
                               
                               }
		                    }
	                    }
                        
                        
                        
                        for (var k = 0; k < enemy3.length; k++) {
		                    var status = crash(enemy3[k].x_, enemy3[k].y_, enemy3_pic_width, enemy3_pic_height, bullet[i].x_, bullet[i].y_, bullet_pic_width, bullet_pic_height);
		                    if (status) {
		                        //如果碰撞到则消失
		                        bullet.splice(i, 1);
		                        enemy3.splice(k, 1);
		                        num2++;
	//                          alert(num);
		                        txt2.value=num2;
		                        
		                       
		                    }
	                    }

                        
                    }

                }
            }

            //======================================================================================      
            //绘制玩家
            
            pen.drawImage(img.player, 0, 0, player_pic_width, player_pic_height, player.x_, player.y_, player_pic_width, player_pic_height);
            for (var k = 0; k < enemy1.length; k++) {
               	var status_ = crash(enemy1[k].x_, enemy1[k].y_, enemy1_pic_width, enemy1_pic_height, player.x_, player.y_, player_pic_width, player_pic_height);
                if (status_) {
                    //如果碰撞到则消失
//                  bullet.splice(i, 1);
                    if(num1>1){
                        enemy1.splice(k, 1);
                        num1--;
                        player.blood--;
                             
                        txt1.value=num1;
                        
                    }
                    else{
                        txt1.value=0;
                        player={};
                        
                        
                        enemy1=[];
                        enemy2=[];
                        
                        clearInterval(pushEnemy1Int);
                        clearInterval(pushEnemy2Int);
                        
						
						txt3.value = num2;
						
						var over = document.getElementById("over");
						var foot = document.getElementById("foot");
						
                        over.style.display="block";
                        foot.style.display="none";
                        
                    }
                }
            }
            
            for(var k = 0; k < enemy2.length; k++) {
                    var status_ = crash(enemy2[k].x_, enemy2[k].y_, enemy2_pic_width, enemy2_pic_height, player.x_, player.y_, enemy2_pic_width, enemy2_pic_height);
                    if(status_) {
                    //如果碰撞到则消失
//                      bullet.splice(i, 1);
                        if(num1 > 1) {
                            enemy2.splice(k, 1);
                            
                            num1--;
                            player.blood--;
                            txt1.value = num1;
                        } else {
                            txt1.value = 0;
                            player = {};
                            
                            enemy1 = [];
                            enemy2 = [];
                            

                            clearInterval(pushEnemy2Int);
                            clearInterval(pushEnemy3Int);

							txt3.value = num2;
							
                            var over = document.getElementById("over");
							var foot = document.getElementById("foot");
						
                        	over.style.display="block";
                        	foot.style.display="none";
                        		                    	
                        }
                    }
                } 
                
                
                
                for(var k = 0; k < enemy3.length; k++) {
                    var status_ = crash(enemy3[k].x_, enemy3[k].y_, enemy3_pic_width, enemy3_pic_height, player.x_, player.y_, enemy3_pic_width, enemy3_pic_height);
                    if(status_) {
                    //如果碰撞到则消失
//                      bullet.splice(i, 1);
                        if(num1 > 1) {
                            enemy3.splice(k, 1);
                            
                            num1--;
                            player.blood--;
                            txt1.value = num1;
                        } else {
                            txt1.value = 0;
                            player = {};
                            
                            enemy1 = [];
                            enemy2 = [];
                            enemy3 = [];
                            

                            clearInterval(pushEnemy3Int);
                            clearInterval(imgLoadsInt);

							txt3.value = num2;
							
                            var over = document.getElementById("over");
							var foot = document.getElementById("foot");
							
                        	over.style.display="block";
                        	foot.style.display="none";
                        	
                      		
                        }
                    }
                } 
                

        }, 1000/16 );

    });
}

    /*********************************************************
     * 
     * Application Name: pipixia，Let's go!(皮皮虾我们走)
     * Designer: Jeancen.Hsu(许进春)
     * Coder: Jeancen.Hsu(许进春)
     * 
     * Version: 2.1.2
     * Last Modify Date: 2017/03/03
     * Modifier: Jeancen.Hsu(许进春)
     * 
     * Code by Html5,CSS3,JQuery And JavaScript
     * 1.0 Version Created At 2016/07/14
     *                    
     *                      
     *********************************************************/